version: "3"
services:
  dozzle:
    container_name: dozzle
    image: amir20/dozzle:latest
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - 9999:8080
    restart: unless-stopped
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.dozzle-local.entrypoints=https"
      - "traefik.http.routers.dozzle-local.rule=Host(`${TRAEFIK_DOZZLE_LOCAL}`)"
      - "traefik.http.routers.dozzle-local.tls=true"
      - "traefik.http.routers.dozzle-local.tls.certresolver=mydnschallenge"
      - "traefik.http.routers.dozzle-local.tls.domains[0].main=${TRAEFIK_LOCAL_DOMAIN}"
      - "traefik.http.routers.dozzle-local.tls.domains[0].sans=*.${TRAEFIK_LOCAL_DOMAIN}"     
      - "com.centurylinklabs.watchtower.enable=true"
networks:
  default:
    name: containers_bridge
    external: true